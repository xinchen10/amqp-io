<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Sat Apr 16 11:25:31 PDT 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AmqpSerializer (amqp-io 0.1.0 API)</title>
<meta name="date" content="2016-04-16">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AmqpSerializer (amqp-io 0.1.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../aikexq/amqp/io/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AmqpSerializer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../aikexq/amqp/io/AmqpProvide.html" title="annotation in aikexq.amqp.io"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../aikexq/amqp/io/EncodingType.html" title="enum in aikexq.amqp.io"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?aikexq/amqp/io/AmqpSerializer.html" target="_top">Frames</a></li>
<li><a href="AmqpSerializer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">aikexq.amqp.io</div>
<h2 title="Class AmqpSerializer" class="title">Class AmqpSerializer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>aikexq.amqp.io.AmqpSerializer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">AmqpSerializer</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>AmqpSerializer encodes Java objects into bytes and decodes Java object
 from bytes using the AMQP type system. Examples of usage,
 </p>
 <ul>
 <li>encode: <code>AmqpSerializer.serialize(ByteBuffer, Object)</code></li>
 <li>decode: <code>AmqpSerializer.deserialize(Class&lt;?&gt;, ByteBuffer)</code></li>
 </ul><br>
 <p>Java primitive types are encoded as AMQP types directly.
 <ul>
 <li>boolean: a boolean value</li>
 <li>byte: a signed 8-bit integer</li>
 <li>short: a signed 16-bit integer</li>
 <li>int: a signed 32-bit integer</li>
 <li>long: a signed 64-bit integer</li>
 <li>float: a 32-bit precision IEEE-754 floating point</li>
 <li>double: a 64-bit precision IEEE-754 floating point</li>
 <li>char: utf32 BE encoded Unicode character</li>
 <li>Date: 64-bit signed integer representing milliseconds since the Unix epoch</li>
 <li>UUID: UUID as defined in section 4.1.2 of RFC-4122</li>
 <li>byte[]: array of bytes</li>
 <li>string: UTF8 Unicode string</li>
 <li>List: a list. Value must be primitive types</li>
 <li>Map: a map. Key and value must be primitive types</li>
 </ul>
 </p>
 <p>A custom type is serialized as an AMQP described type. By default,
 the descriptor, which is an AMQP symbol, is the full name of the class,
 and the value is an AMQP list containing values of the non-static
 non-transient fields. Each field is identified by its relative position
 defined in the class. </p>
 <p>Custom types can be Java built-in types or user-defined types. Since
 each field is implicitly identified by its position, any changes in
 ordering can cause breaks.</p>
 <p>For example, an AtomicLong object is represented as the following AMQP
 described list.</p>
 <pre><code>&lt;type name="atomic-long" source="list" provides="Number"&gt;
   &lt;descriptor name="java.util.concurrent.atomic.AtomicLong"/&gt;
   &lt;field name="value" type="long" mandatory="true"/&gt;
 &lt;/type&gt;
 </code></pre>
 <p>Not all Java classes can be safely serialized by this serializer,
 even for those that implement Serializable. They may contain non-compatible
 data types or implement their own writeObject and readObject methods.
 The serializer does not invoke the writeObject and readObject because
 they produce or consume non-AMQP bytes.</p>
 <p>A class without default constructor is not supported.</p>
 <p>A class that does special initialization in constructor or readObject
 method may either fail to be deserialized or not fully initialized after
 decoding. One such example is the java.net.URI class. After decoding,
 the "string" field is correctly set but all other transient fields are
 not initialized.</p>
 <p>AMQP annotation classes are introduced to address these limitations and
 provide more control on object serialization without user writing custom
 readObject/writeObject methods.</p>
 <p>AmqpContract annotation can be used to customize the descriptor name
 and the encoding type. AmqpMember annotation specifies which fields to
 be included in serialization. Fields without AmqpMember annotation are
 excluded. When the encoding type is set to DescribedMap, the object is
 encoded as an AMQP described map. The key of each field is the field name
 by default, and can be changed in AmqpMember annotation.</p>
 <p>The type name specified in AmqpContract is scoped to the AmqpSerializer
 instance by which the object is encoded or decoded. When the static 
 methods are called, the name must be unique globally.</P>
 <p>The following class definition maps a Book object to an AMQP described
 map with custom class name and field names.</p>
 <pre><code>
   @AmqpContract(name="ns:book" type=EncodingType.DescribedMap)
   public class Book {
     @AmqpMember(name="ns:title")
     public string title;
     @AmqpMember(name="ns:authors")
     public string authors;
     @AmqpMember(name="ns:webiste")
     public string website;
   }
 </code></pre>
 <p>Class inheritance is also supported. If annotated, derived classes
 must have the same EncodingType as the base class. In cases where
 a reader knows only the base type but the buffer may contain instances
 of different types on the inheritance hierarchy, the base class can be
 annotated with AmqpProvide to define a list of known derived classes.
 The AmqpProvide annotation  enables the decoder to resolve the correct
 type of an object in the buffer based on its descriptor name.
 The following example shows the Book class has two derived classes.</p>
 <pre><code>
   @AmqpContract(name="ns:book" type=EncodingType.DescribedMap)
   @AmqpProvide(types={ChildrenBook.class, FictionBook.class})
   public class Book {
     //...
   }
 
   @AmqpContract(name="ns:children-book" type=EncodingType.DescribedMap)
   public class ChildrenBook extends Book {
     public int age;
   }
 
   @AmqpContract(name="ns:finction-book" type=EncodingType.DescribedMap)
   public class FictionBook extends Book {
     public string category;
   }
 </code></pre>
 <p>Given a ByteBuffer, the caller now can call
 <code>AmqpSerializer.deserialize(Book.class, buffer)</code> to decode either
 ChildrenBook or FictionBook instances from the buffer.</p>
 <p>Cyclic class reference is allowed, but cyclic object reference in
 encoding is not allowed.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../aikexq/amqp/io/AmqpSerializer.html#AmqpSerializer()">AmqpSerializer</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><strong><a href="../../../aikexq/amqp/io/AmqpSerializer.html#deserialize(java.lang.Class,%20java.nio.ByteBuffer)">deserialize</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;T&gt;&nbsp;c,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer)</code>
<div class="block">Decodes an object of the specified type from the buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><strong><a href="../../../aikexq/amqp/io/AmqpSerializer.html#readObject(java.lang.Class,%20java.nio.ByteBuffer)">readObject</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&nbsp;c,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer)</code>
<div class="block">Decodes an object of the specified type from the buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../aikexq/amqp/io/AmqpSerializer.html#serialize(java.nio.ByteBuffer,%20java.lang.Object)">serialize</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;graph)</code>
<div class="block">Encodes an object graph into bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../aikexq/amqp/io/AmqpSerializer.html#writeObject(java.nio.ByteBuffer,%20java.lang.Object)">writeObject</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;graph)</code>
<div class="block">Encodes an object graph into bytes.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AmqpSerializer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AmqpSerializer</h4>
<pre>public&nbsp;AmqpSerializer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="serialize(java.nio.ByteBuffer, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serialize</h4>
<pre>public static&nbsp;void&nbsp;serialize(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;graph)
                      throws <a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></pre>
<div class="block">Encodes an object graph into bytes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buffer</code> - Buffer to save the bytes. The buffer's position is
 advanced after bytes are written.</dd><dd><code>graph</code> - Object to be encoded.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></code></dd></dl>
</li>
</ul>
<a name="deserialize(java.lang.Class, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deserialize</h4>
<pre>public static&nbsp;&lt;T&gt;&nbsp;T&nbsp;deserialize(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;T&gt;&nbsp;c,
                <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer)
                     throws <a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></pre>
<div class="block">Decodes an object of the specified type from the buffer.</div>
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>T</code> - Expected type of the object. The buffer's position is
 advanced after bytes are read.</dd><dt><span class="strong">Parameters:</span></dt><dd><code>c</code> - Class of the type.</dd><dd><code>buffer</code> - Buffer to read bytes.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Object of type T.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></code></dd></dl>
</li>
</ul>
<a name="writeObject(java.nio.ByteBuffer, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeObject</h4>
<pre>public&nbsp;void&nbsp;writeObject(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer,
               <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;graph)
                 throws <a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></pre>
<div class="block">Encodes an object graph into bytes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buffer</code> - Buffer to save the bytes. The buffer's position is
 advanced after bytes are written.</dd><dd><code>graph</code> - Object to be encoded.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></code></dd></dl>
</li>
</ul>
<a name="readObject(java.lang.Class, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>readObject</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;T&nbsp;readObject(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&nbsp;c,
               <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buffer)
             throws <a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></pre>
<div class="block">Decodes an object of the specified type from the buffer.</div>
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>T</code> - Expected type of the object. The buffer's position is
 advanced after bytes are read.</dd><dt><span class="strong">Parameters:</span></dt><dd><code>c</code> - Class of the type.</dd><dd><code>buffer</code> - Buffer to read bytes.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Object of type T.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../aikexq/amqp/io/AmqpIoException.html" title="class in aikexq.amqp.io">AmqpIoException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../aikexq/amqp/io/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AmqpSerializer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../aikexq/amqp/io/AmqpProvide.html" title="annotation in aikexq.amqp.io"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../aikexq/amqp/io/EncodingType.html" title="enum in aikexq.amqp.io"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?aikexq/amqp/io/AmqpSerializer.html" target="_top">Frames</a></li>
<li><a href="AmqpSerializer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
